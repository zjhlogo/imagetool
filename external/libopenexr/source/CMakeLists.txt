cmake_minimum_required (VERSION 3.1.0)
project (static_openexr)

include_directories(${PROJECT_SOURCE_DIR})
include_directories(${PROJECT_SOURCE_DIR}/Half)
include_directories(${PROJECT_SOURCE_DIR}/Iex)
include_directories(${PROJECT_SOURCE_DIR}/IexMath)
include_directories(${PROJECT_SOURCE_DIR}/IlmImf)
include_directories(${PROJECT_SOURCE_DIR}/IlmThread)
include_directories(${PROJECT_SOURCE_DIR}/Imath)
include_directories(${PROJECT_SOURCE_DIR}/../../libzlib/source)

set(ALL_FILES
Half/eLut.cpp
Half/eLut.h
Half/half.cpp
Half/half.h
Half/halfExport.h
Half/halfFunction.h
Half/halfLimits.h
Half/toFloat.cpp
Half/toFloat.h
Iex/Iex.h
Iex/IexBaseExc.cpp
Iex/IexBaseExc.h
Iex/IexErrnoExc.h
Iex/IexExport.h
Iex/IexForward.h
Iex/IexMacros.h
Iex/IexMathExc.h
Iex/IexNamespace.h
Iex/IexThrowErrnoExc.cpp
Iex/IexThrowErrnoExc.h
IexMath/IexMathFloatExc.cpp
IexMath/IexMathFloatExc.h
IexMath/IexMathFpu.cpp
IexMath/IexMathFpu.h
IexMath/IexMathIeeeExc.h
IlmBaseConfig.h
IlmImf/b44ExpLogTable.cpp
IlmImf/b44ExpLogTable.h
IlmImf/dwaLookups.cpp
IlmImf/dwaLookups.h
IlmImf/ImfAcesFile.cpp
IlmImf/ImfAcesFile.h
IlmImf/ImfArray.h
IlmImf/ImfAttribute.cpp
IlmImf/ImfAttribute.h
IlmImf/ImfAutoArray.h
IlmImf/ImfB44Compressor.cpp
IlmImf/ImfB44Compressor.h
IlmImf/ImfBoxAttribute.cpp
IlmImf/ImfBoxAttribute.h
IlmImf/ImfChannelList.cpp
IlmImf/ImfChannelList.h
IlmImf/ImfChannelListAttribute.cpp
IlmImf/ImfChannelListAttribute.h
IlmImf/ImfCheckedArithmetic.h
IlmImf/ImfChromaticities.cpp
IlmImf/ImfChromaticities.h
IlmImf/ImfChromaticitiesAttribute.cpp
IlmImf/ImfChromaticitiesAttribute.h
IlmImf/ImfCompositeDeepScanLine.cpp
IlmImf/ImfCompositeDeepScanLine.h
IlmImf/ImfCompression.h
IlmImf/ImfCompressionAttribute.cpp
IlmImf/ImfCompressionAttribute.h
IlmImf/ImfCompressor.cpp
IlmImf/ImfCompressor.h
IlmImf/ImfConvert.cpp
IlmImf/ImfConvert.h
IlmImf/ImfCRgbaFile.cpp
IlmImf/ImfCRgbaFile.h
IlmImf/ImfDeepCompositing.cpp
IlmImf/ImfDeepCompositing.h
IlmImf/ImfDeepFrameBuffer.cpp
IlmImf/ImfDeepFrameBuffer.h
IlmImf/ImfDeepImageState.h
IlmImf/ImfDeepImageStateAttribute.cpp
IlmImf/ImfDeepImageStateAttribute.h
IlmImf/ImfDeepScanLineInputFile.cpp
IlmImf/ImfDeepScanLineInputFile.h
IlmImf/ImfDeepScanLineInputPart.cpp
IlmImf/ImfDeepScanLineInputPart.h
IlmImf/ImfDeepScanLineOutputFile.cpp
IlmImf/ImfDeepScanLineOutputFile.h
IlmImf/ImfDeepScanLineOutputPart.cpp
IlmImf/ImfDeepScanLineOutputPart.h
IlmImf/ImfDeepTiledInputFile.cpp
IlmImf/ImfDeepTiledInputFile.h
IlmImf/ImfDeepTiledInputPart.cpp
IlmImf/ImfDeepTiledInputPart.h
IlmImf/ImfDeepTiledOutputFile.cpp
IlmImf/ImfDeepTiledOutputFile.h
IlmImf/ImfDeepTiledOutputPart.cpp
IlmImf/ImfDeepTiledOutputPart.h
IlmImf/ImfDoubleAttribute.cpp
IlmImf/ImfDoubleAttribute.h
IlmImf/ImfDwaCompressor.cpp
IlmImf/ImfDwaCompressor.h
IlmImf/ImfDwaCompressorSimd.h
IlmImf/ImfEnvmap.cpp
IlmImf/ImfEnvmap.h
IlmImf/ImfEnvmapAttribute.cpp
IlmImf/ImfEnvmapAttribute.h
IlmImf/ImfExport.h
IlmImf/ImfFastHuf.cpp
IlmImf/ImfFastHuf.h
IlmImf/ImfFloatAttribute.cpp
IlmImf/ImfFloatAttribute.h
IlmImf/ImfFloatVectorAttribute.cpp
IlmImf/ImfFloatVectorAttribute.h
IlmImf/ImfForward.h
IlmImf/ImfFrameBuffer.cpp
IlmImf/ImfFrameBuffer.h
IlmImf/ImfFramesPerSecond.cpp
IlmImf/ImfFramesPerSecond.h
IlmImf/ImfGenericInputFile.cpp
IlmImf/ImfGenericInputFile.h
IlmImf/ImfGenericOutputFile.cpp
IlmImf/ImfGenericOutputFile.h
IlmImf/ImfHeader.cpp
IlmImf/ImfHeader.h
IlmImf/ImfHuf.cpp
IlmImf/ImfHuf.h
IlmImf/ImfInputFile.cpp
IlmImf/ImfInputFile.h
IlmImf/ImfInputPart.cpp
IlmImf/ImfInputPart.h
IlmImf/ImfInputPartData.cpp
IlmImf/ImfInputPartData.h
IlmImf/ImfInputStreamMutex.h
IlmImf/ImfInt64.h
IlmImf/ImfIntAttribute.cpp
IlmImf/ImfIntAttribute.h
IlmImf/ImfIO.cpp
IlmImf/ImfIO.h
IlmImf/ImfKeyCode.cpp
IlmImf/ImfKeyCode.h
IlmImf/ImfKeyCodeAttribute.cpp
IlmImf/ImfKeyCodeAttribute.h
IlmImf/ImfLineOrder.h
IlmImf/ImfLineOrderAttribute.cpp
IlmImf/ImfLineOrderAttribute.h
IlmImf/ImfLut.cpp
IlmImf/ImfLut.h
IlmImf/ImfMatrixAttribute.cpp
IlmImf/ImfMatrixAttribute.h
IlmImf/ImfMisc.cpp
IlmImf/ImfMisc.h
IlmImf/ImfMultiPartInputFile.cpp
IlmImf/ImfMultiPartInputFile.h
IlmImf/ImfMultiPartOutputFile.cpp
IlmImf/ImfMultiPartOutputFile.h
IlmImf/ImfMultiView.cpp
IlmImf/ImfMultiView.h
IlmImf/ImfName.h
IlmImf/ImfNamespace.h
IlmImf/ImfOpaqueAttribute.cpp
IlmImf/ImfOpaqueAttribute.h
IlmImf/ImfOptimizedPixelReading.h
IlmImf/ImfOutputFile.cpp
IlmImf/ImfOutputFile.h
IlmImf/ImfOutputPart.cpp
IlmImf/ImfOutputPart.h
IlmImf/ImfOutputPartData.cpp
IlmImf/ImfOutputPartData.h
IlmImf/ImfOutputStreamMutex.h
IlmImf/ImfPartHelper.h
IlmImf/ImfPartType.cpp
IlmImf/ImfPartType.h
IlmImf/ImfPixelType.h
IlmImf/ImfPizCompressor.cpp
IlmImf/ImfPizCompressor.h
IlmImf/ImfPreviewImage.cpp
IlmImf/ImfPreviewImage.h
IlmImf/ImfPreviewImageAttribute.cpp
IlmImf/ImfPreviewImageAttribute.h
IlmImf/ImfPxr24Compressor.cpp
IlmImf/ImfPxr24Compressor.h
IlmImf/ImfRational.cpp
IlmImf/ImfRational.h
IlmImf/ImfRationalAttribute.cpp
IlmImf/ImfRationalAttribute.h
IlmImf/ImfRgba.h
IlmImf/ImfRgbaFile.cpp
IlmImf/ImfRgbaFile.h
IlmImf/ImfRgbaYca.cpp
IlmImf/ImfRgbaYca.h
IlmImf/ImfRle.cpp
IlmImf/ImfRle.h
IlmImf/ImfRleCompressor.cpp
IlmImf/ImfRleCompressor.h
IlmImf/ImfScanLineInputFile.cpp
IlmImf/ImfScanLineInputFile.h
IlmImf/ImfSimd.h
IlmImf/ImfStandardAttributes.cpp
IlmImf/ImfStandardAttributes.h
IlmImf/ImfStdIO.cpp
IlmImf/ImfStdIO.h
IlmImf/ImfStringAttribute.cpp
IlmImf/ImfStringAttribute.h
IlmImf/ImfStringVectorAttribute.cpp
IlmImf/ImfStringVectorAttribute.h
IlmImf/ImfSystemSpecific.cpp
IlmImf/ImfSystemSpecific.h
IlmImf/ImfTestFile.cpp
IlmImf/ImfTestFile.h
IlmImf/ImfThreading.cpp
IlmImf/ImfThreading.h
IlmImf/ImfTileDescription.h
IlmImf/ImfTileDescriptionAttribute.cpp
IlmImf/ImfTileDescriptionAttribute.h
IlmImf/ImfTiledInputFile.cpp
IlmImf/ImfTiledInputFile.h
IlmImf/ImfTiledInputPart.cpp
IlmImf/ImfTiledInputPart.h
IlmImf/ImfTiledMisc.cpp
IlmImf/ImfTiledMisc.h
IlmImf/ImfTiledOutputFile.cpp
IlmImf/ImfTiledOutputFile.h
IlmImf/ImfTiledOutputPart.cpp
IlmImf/ImfTiledOutputPart.h
IlmImf/ImfTiledRgbaFile.cpp
IlmImf/ImfTiledRgbaFile.h
IlmImf/ImfTileOffsets.cpp
IlmImf/ImfTileOffsets.h
IlmImf/ImfTimeCode.cpp
IlmImf/ImfTimeCode.h
IlmImf/ImfTimeCodeAttribute.cpp
IlmImf/ImfTimeCodeAttribute.h
IlmImf/ImfVecAttribute.cpp
IlmImf/ImfVecAttribute.h
IlmImf/ImfVersion.cpp
IlmImf/ImfVersion.h
IlmImf/ImfWav.cpp
IlmImf/ImfWav.h
IlmImf/ImfXdr.h
IlmImf/ImfZip.cpp
IlmImf/ImfZip.h
IlmImf/ImfZipCompressor.cpp
IlmImf/ImfZipCompressor.h
IlmThread/IlmThread.cpp
IlmThread/IlmThread.h
IlmThread/IlmThreadExport.h
IlmThread/IlmThreadForward.h
IlmThread/IlmThreadMutex.cpp
IlmThread/IlmThreadMutex.h
IlmThread/IlmThreadMutexPosix.cpp
IlmThread/IlmThreadMutexWin32.cpp
IlmThread/IlmThreadNamespace.h
IlmThread/IlmThreadPool.cpp
IlmThread/IlmThreadPool.h
IlmThread/IlmThreadPosix.cpp
IlmThread/IlmThreadSemaphore.cpp
IlmThread/IlmThreadSemaphore.h
IlmThread/IlmThreadSemaphorePosix.cpp
IlmThread/IlmThreadSemaphorePosixCompat.cpp
IlmThread/IlmThreadSemaphoreWin32.cpp
IlmThread/IlmThreadWin32.cpp
Imath/ImathBox.cpp
Imath/ImathBox.h
Imath/ImathBoxAlgo.h
Imath/ImathColor.h
Imath/ImathColorAlgo.cpp
Imath/ImathColorAlgo.h
Imath/ImathEuler.h
Imath/ImathExc.h
Imath/ImathExport.h
Imath/ImathForward.h
Imath/ImathFrame.h
Imath/ImathFrustum.h
Imath/ImathFrustumTest.h
Imath/ImathFun.cpp
Imath/ImathFun.h
Imath/ImathGL.h
Imath/ImathGLU.h
Imath/ImathHalfLimits.h
Imath/ImathInt64.h
Imath/ImathInterval.h
Imath/ImathLimits.h
Imath/ImathLine.h
Imath/ImathLineAlgo.h
Imath/ImathMath.h
Imath/ImathMatrix.h
Imath/ImathMatrixAlgo.cpp
Imath/ImathMatrixAlgo.h
Imath/ImathNamespace.h
Imath/ImathPlane.h
Imath/ImathPlatform.h
Imath/ImathQuat.h
Imath/ImathRandom.cpp
Imath/ImathRandom.h
Imath/ImathRoots.h
Imath/ImathShear.cpp
Imath/ImathShear.h
Imath/ImathSphere.h
Imath/ImathVec.cpp
Imath/ImathVec.h
Imath/ImathVecAlgo.h
OpenEXRConfig.h
)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

add_library(static_openexr ${ALL_FILES})

foreach(FILE ${ALL_FILES}) 
    get_filename_component(PARENT_DIR "${FILE}" PATH)

    # skip source and changes /'s to \\'s
    string(REGEX REPLACE "(\\./)?(source)/?" "" GROUP "${PARENT_DIR}")
    string(REPLACE "/" "\\" GROUP "${GROUP}")
    source_group("${GROUP}" FILES "${FILE}")
endforeach()
